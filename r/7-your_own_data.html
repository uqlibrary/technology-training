<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analysing your own data – UQ Library Training Intensives</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-d58b9a2750f78c4ba5585652ef45bd1c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">UQ Library Training Intensives</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../r/setup.html" aria-current="page"> 
<span class="menu-text">R</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../qgis/setup.html"> 
<span class="menu-text">QGIS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../python/setup.html"> 
<span class="menu-text">Python</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../project/details.html"> 
<span class="menu-text">The Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../gallery/project_gallery.html"> 
<span class="menu-text">Project Gallery</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://uqlibrary.github.io/technology-training"> 
<span class="menu-text">UQ Library Technology Training</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../r/7-your_own_data.html">Analysing your own data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../r/setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R with RStudio</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Essentials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../r/Essentials/1-Fundamentals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Fundamentals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../r/Essentials/2-Data_processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preparing data for analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../r/Essentials/3-Visualisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualisation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../r/Essentials/4-Sharing_and_Publishing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sharing and Publishing</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Advanced topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../r/Advanced topics/5-Statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../r/Advanced topics/6-Programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming Essentials</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../r/7-your_own_data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Analysing your own data</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setting-up" id="toc-setting-up" class="nav-link active" data-scroll-target="#setting-up">Setting up</a></li>
  <li><a href="#environments-and-importing-data" id="toc-environments-and-importing-data" class="nav-link" data-scroll-target="#environments-and-importing-data">Environments and importing data</a>
  <ul class="collapse">
  <li><a href="#getting-your-setup-right" id="toc-getting-your-setup-right" class="nav-link" data-scroll-target="#getting-your-setup-right">Getting your setup right</a></li>
  <li><a href="#importing-your-data-correctly" id="toc-importing-your-data-correctly" class="nav-link" data-scroll-target="#importing-your-data-correctly">Importing your data correctly</a></li>
  </ul></li>
  <li><a href="#dealing-with-different-and-dodgy-data" id="toc-dealing-with-different-and-dodgy-data" class="nav-link" data-scroll-target="#dealing-with-different-and-dodgy-data">Dealing with different and dodgy data</a>
  <ul class="collapse">
  <li><a href="#reshaping-your-data" id="toc-reshaping-your-data" class="nav-link" data-scroll-target="#reshaping-your-data">Reshaping your data</a></li>
  <li><a href="#cleaning-up-inconsistencies" id="toc-cleaning-up-inconsistencies" class="nav-link" data-scroll-target="#cleaning-up-inconsistencies">Cleaning up inconsistencies</a></li>
  <li><a href="#dealing-with-different-types-of-data" id="toc-dealing-with-different-types-of-data" class="nav-link" data-scroll-target="#dealing-with-different-types-of-data">Dealing with different types of data</a></li>
  </ul></li>
  <li><a href="#what-to-do-when-you-dont-know-what-to-do" id="toc-what-to-do-when-you-dont-know-what-to-do" class="nav-link" data-scroll-target="#what-to-do-when-you-dont-know-what-to-do">What to do when you don’t know what to do</a></li>
  <li><a href="#now-give-it-a-go" id="toc-now-give-it-a-go" class="nav-link" data-scroll-target="#now-give-it-a-go">Now give it a go!</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysing your own data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this final session, we look at taking the skills we’ve developed during the intensive and applying it to your own data. We’ll also discuss a few common pitfalls and where to get help in the wild.</p>
<section id="setting-up" class="level2">
<h2 class="anchored" data-anchor-id="setting-up">Setting up</h2>
<p>Spend five minutes locating your data and preparing Spyder</p>
<ol type="1">
<li>Locate and structure your own project folder
<ul>
<li>You might like to create a <em>data/</em> folder</li>
<li>You might like to create a <em>scripts/</em> folder</li>
</ul></li>
<li>(Optional) Turn it into an RStudio project
<ol type="1">
<li>Click <em>File</em> <span class="math inline">\(\rightarrow\)</span> <em>New Project…</em></li>
<li>Click <strong>Existing Directory</strong></li>
<li>Click <em>Browse…</em> and choose <strong><em>top-level folder</em></strong> of your project</li>
</ol></li>
<li>Create a new script for processing, called <code>processing.R</code> (or whatever you’d like to).</li>
</ol>
<p>We’ll spend most of this session like project time, troubleshooting and setting up your own data for analysis. Before we do that, let’s discuss a few common tips and pitfalls. Namely,</p>
<ul>
<li>Managing paths and the working directory</li>
<li>Importing different data structures and files</li>
<li>Dealing with different types of data</li>
</ul>
</section>
<section id="environments-and-importing-data" class="level2">
<h2 class="anchored" data-anchor-id="environments-and-importing-data">Environments and importing data</h2>
<p>Perhaps the most frustrating issues are those which prevent you from importing the data at all!</p>
<section id="getting-your-setup-right" class="level3">
<h3 class="anchored" data-anchor-id="getting-your-setup-right">Getting your setup right</h3>
<p>Nobody likes to encounter this:</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in file(file, "rt"): cannot open file 'PANIC!': No such file or
directory</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>Error in file(file, "rt"): cannot open the connection</code></pre>
</div>
</div>
<p>To solve it, we need to talk about filesystems.</p>
<p>When running an R script, there are always three relevant locations:</p>
<ul>
<li>Your R executable</li>
<li>Your script</li>
<li>Your working directory</li>
</ul>
<p>The R executable runs your script <strong>from the working directory</strong></p>
<p>Why does this matter? Because when you import data, R uses your <strong>working directory</strong> as the reference, not the others. This means that there are important questions you need to ask:</p>
<ol type="1">
<li>Where is your working directory?</li>
<li>Where is your data?</li>
</ol>
<p>Answering the first question is easy: simply run</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/home/runner/work/technology-training-intensives/technology-training-intensives/r"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Alternatively
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>When you run R from the command line, it’s the current location as specified in the terminal</li>
<li>When you run R in RStudio, it’s the address displayed in the bar attached to <strong>Console</strong></li>
</ul>
</div>
</div>
<p>This address is your working directory. All paths in your scripts are evaluated relative to this location.</p>
<p>This includes data paths, which can be absolute or relative, and can be online.</p>
<p>Absolute paths begin with a root prefix and have folders separated with slashes. They contain <strong>all</strong> the folders from the root of the filesystem down to the object of interest.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="os">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Windows</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Unix-like (e.g.&nbsp;macOS, Ubuntu)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">URL</a></li></ul>
<div class="tab-content" data-group="os">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>On Windows, absolute paths are prefixed with the drive, e.g.&nbsp;<code>C:\</code> and folders separated with backslashes <code>\</code></p>
<pre><code>C:\Users\...\...\data\example.csv</code></pre>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>On unix-like systems, absolute paths are prefixed with a forwardslash <code>/</code>, which also separate folders.</p>
<pre><code>/home/user/.../.../data/example.csv</code></pre>
<p>Alternatively, you also have the option to start from your ‘user’ directory by prefixing with a tilde <code>~</code>:</p>
<pre><code>~/.../.../data/example.csv</code></pre>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>Website and web-hosted files can typically be accessed with URLs. Full or ‘absolute’ URLs are prefixed with a protocol (e.g.&nbsp;<code>https://</code>) and a hostname (e.g.&nbsp;<code>www.website.com</code>), with folders then separated by forwardslashes</p>
<pre><code>https://www.website.com/.../.../.../data/example.csv</code></pre>
</div>
</div>
</div>
<p>Relative filepaths have no prefix.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset" data-group="os">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Windows</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Unix-like (e.g.&nbsp;macOS, Ubuntu)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">URL</a></li></ul>
<div class="tab-content" data-group="os">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>On Windows, relative paths are still separated with backslashes</p>
<pre><code>data\example.csv</code></pre>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>On unix-like systems, relative paths are still separated with forwardslashes</p>
<pre><code>data/example.csv</code></pre>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>It’s possible to have a relative path to a web file, however, as a relative filepath, you <strong>must be running Python from the server.</strong></p>
<p>The syntax is the same as unix-like systems, i.e., folders separated with forwardslashes</p>
<pre><code>data/example.csv</code></pre>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Should I use absolute or relative paths?
</div>
</div>
<div class="callout-body-container callout-body">
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 41%">
<col style="width: 49%">
</colgroup>
<tbody>
<tr class="odd">
<td></td>
<td>Pros</td>
<td>Cons</td>
</tr>
<tr class="even">
<td>Absolute</td>
<td><ul>
<li>Works for any working directory (on same device)</li>
</ul></td>
<td><ul>
<li>Only valid on one device</li>
<li>Can get long</li>
<li>Can contain irrelevant information</li>
</ul></td>
</tr>
<tr class="odd">
<td>Relative</td>
<td><ul>
<li>Works on any device with the same <em>project</em> structure</li>
<li>Only contains project-specific information</li>
<li>Can be shorter</li>
</ul></td>
<td><ul>
<li>Working directory must be set up correctly</li>
<li>Can become confusing with many parent folders (e.g.&nbsp;<code>../../../</code>)</li>
</ul></td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Once you have your working directory and your filepath, you can now check that any data paths have been specified correctly.</p>
<p><strong>If the path is absolute</strong></p>
<p>You just need to ensure that your working directory is on the same device as the file.</p>
<p><strong>If the path is relative</strong></p>
<p>Go to the working directory and trace the path to ensure it’s correct. The path begins <em>inside</em> the working directory. A few oddities:</p>
<ul>
<li><code>..</code> indicates go <em>up</em> a folder</li>
<li><code>.</code> indicates the current folder</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Changing the working directory
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you’re using a project, you shouldn’t need to change working directories. Instead, try modifying the path first.</p>
<p>If you need to change working directories, you can do this with R code,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"path/to/dir"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Or in the <strong>Files</strong> tab by navigating to the folder and clicking <em>More</em> <span class="math inline">\(\rightarrow\)</span> <em>Set As Working Directory</em>.</p>
<p>You should check that it’s worked by running <code>getwd()</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Watch out Windows users
</div>
</div>
<div class="callout-body-container callout-body">
<p>The backslashes in Windows paths conflict with R’s escape character in strings (also a backslash). To fix this, you can</p>
<ul>
<li>Replace backslashes with forwardslashes <strong>in R</strong></li>
<li>Use <em>raw strings</em>: <code>r"(...)"</code></li>
<li>Escape the backslashes with an <em>extra</em> backslash</li>
</ul>
<p>For example, the following Windows path</p>
<p><i></i></p><i>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">C:\Users\me\data\secrets.csv</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</i><p><i></i></p>
<p>could be imported as any of the following</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Raw strings</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(r<span class="st">"(C:\Users\me\data\secrets.csv)"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace with forwardslashes</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"C:/Users/me/data/secrets.csv"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Escape the backslashes</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">me</span><span class="sc">\\</span><span class="st">data</span><span class="sc">\\</span><span class="st">secrets.csv"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>We recommend using the <code>r"(...)"</code> option where possible, as it’s the least work.</p>
</div>
</div>
<p>If you’ve fixed the filepath and you’re on top of the Windows peculiarities, then check the following errors for more troubleshooting.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>`Error: … is an unrecognized escape in character string
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You’ve probably used a path with backslashes and not adjusted it for R. See “Watch out Windows users” above.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span><code>Error: '\U' used without hex digits in character string...</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You’ve probably used a path with backslashes and not adjusted it for R. See “Watch out Windows users” above.</p>
<p>R throws this error when it runs <code>"\u..."</code> or <code>"\U..."</code> (unless <code>"..."</code> is a valid unicode code; <code>\Users</code> is not).</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span><code>cannot open file...</code> but everything is correct???
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Have you used a path with backslashes on a non-Windows machine? If you have, replace them with forwardslashes.</p>
</div>
</div>
</div>
<p>Final thoughts</p>
<ul>
<li>Avoid spaces</li>
<li>Use relative filepaths where possible</li>
<li>Get familiar with your working directory</li>
</ul>
</section>
<section id="importing-your-data-correctly" class="level3">
<h3 class="anchored" data-anchor-id="importing-your-data-correctly">Importing your data correctly</h3>
<p>Once you’ve got the path working, the next challenge will be importing the data correctly. Unlike our data, yours might have multiple header rows, missing data, simply be organised differently or even be a different file type.</p>
<p>We’ll look at importing .csv files here, but the same applies to other file types.</p>
<p>The documentation for <code>read.csv</code> describes (as of v4.4.0) 25 different parameters that the functions supports. These include</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>file</code></td>
<td>The path (<strong>doesn’t have to actually be <code>.csv</code>!</strong>)</td>
</tr>
<tr class="even">
<td><code>header</code></td>
<td><code>TRUE/FALSE</code> specifying if the first row is a header</td>
</tr>
<tr class="odd">
<td><code>sep</code></td>
<td>The separator (use <code>"\t"</code> for tab separated values)</td>
</tr>
<tr class="even">
<td><code>na.strings</code></td>
<td>A list of values to interpret as empty cells</td>
</tr>
<tr class="odd">
<td><code>skip</code></td>
<td>Skip the first <code>skip=n</code> rows</td>
</tr>
</tbody>
</table>
<p>There are plenty more! Run</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(read.csv)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>to see the rest. For more advanced reading, you can also try the <a href="https://readr.tidyverse.org/"><code>readr</code> package</a>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>MS Excel files (<code>.xlsx</code>)
</div>
</div>
<div class="callout-body-container callout-body">
<p>Reading <code>.xlsx</code> files can be complicated. You should use the <a href="https://readxl.tidyverse.org/"><code>readxl</code> package</a></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><a href="https://readxl.tidyverse.org/reference/read_excel.html?q=read_excel#null">Check out the documentation</a> for details.</p>
</div>
</div>
</section>
</section>
<section id="dealing-with-different-and-dodgy-data" class="level2">
<h2 class="anchored" data-anchor-id="dealing-with-different-and-dodgy-data">Dealing with different and dodgy data</h2>
<p>Our data has been set up to be a bit of a challenge, and a bit of a help. Your data might be organised differently, and might need more work! You might also need to perform different tasks.</p>
<p>We’ll look at a few common tips to get you going, but before you start, the best advice is to get out a pencil and paper and draw. Mock up your data, figure out what you want and write down the steps that you would have to do <em>by hand</em>. Then you’ll have a good grasp of what you want, and whether the code is working.</p>
<p>A few resources that you should consult:</p>
<ul>
<li><a href="https://uqlibrary.github.io/technology-training/R/usefullinks.html">Our compilation of useful resources</a></li>
<li><a href="https://posit.co/resources/cheatsheets/">R and RStudio cheatsheets</a> are fantastic resources which outline the common data tidying tasks along with diagrams of the tabular operations. <strong>Consult these often!</strong></li>
<li><a href="https://dplyr.tidyverse.org/">The dplyr documentation</a> provides in-depth descriptions and guides for working with dplyr.</li>
</ul>
<p>See below for a summary of data cleaning tips you might need to apply to your data, assuming your data is stored in <code>df</code> and <code>"col_name"</code> is a column name</p>
<section id="reshaping-your-data" class="level3">
<h3 class="anchored" data-anchor-id="reshaping-your-data">Reshaping your data</h3>
<p>For simple (or complex) reshaping tasks, like filtering, subsetting and adding new columns, refresh yourself with our second session of this intensive: <a href="./Essentials/2-Data_processing.qmd">2 - Data Processing</a>. Alternatively, the read one of the following user guide articles <!-- 
* [10 minutes to pandas](https://pandas.pydata.org/pandas-docs/stable/user_guide/10min.html)
* [Indexing and selecting data](https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html)
* [Merge, join, concatenate and compare](https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html)
* [Reshaping and pivot tables](https://pandas.pydata.org/pandas-docs/stable/user_guide/reshaping.html)
 --></p>
</section>
<section id="cleaning-up-inconsistencies" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-up-inconsistencies">Cleaning up inconsistencies</h3>
<p>The <code>mutate(...)</code> function is the simplest for cleaning up values in certain columns. Use as</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_col =</span> ...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This creates a new column based on the computation of <code>...</code>, which can include other columns. A useful helper function is <code>if_else()</code>, which changes the computation based on the condition. For example, to replace values <code>"A"</code> with <code>"B"</code> in <code>col_name</code>,</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">col_name =</span> <span class="fu">if_else</span>(col_name <span class="sc">==</span> <span class="st">"A"</span>, <span class="st">"B"</span>, col_name))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>For reshaping and cleaning, consult the <a href="https://nyu-cdsc.github.io/learningr/assets/data-transformation.pdf">dplyr cheatsheet</a></p>
</section>
<section id="dealing-with-different-types-of-data" class="level3">
<h3 class="anchored" data-anchor-id="dealing-with-different-types-of-data">Dealing with different types of data</h3>
<p>Each variable (column) in an R dataframe is stored as a particular data type. Common types include</p>
<ul>
<li><code>object</code> for generic non-numeric data. Each cell can contain any Python object, almost always strings but occasionally lists. Mixed types will default to <code>character</code>.</li>
<li><code>numeric</code> for number</li>
<li><code>logical</code> for booleans (<code>TRUE</code> or <code>FALSE</code>)</li>
<li><code>character</code> for literal strings</li>
<li><code>POSIXct</code> (among others) for timestamps</li>
<li><code>factor</code> for categorical data</li>
</ul>
<p>For applying methods specific to <strong>textual</strong>, <strong>temporal</strong> or <strong>categorical</strong> data, you must first ensure the columns match the dtype you expect. Common mishaps include</p>
<ul>
<li>Timestamps or categorical data stored as <code>character</code> types</li>
<li>Numeric <em>categorical</em> data stored as <code>numeric</code> the type.</li>
</ul>
<p>If you need to change the way a variable is stored, you can either do that during the import stage (e.g.&nbsp;by modifying the function <code>read.csv</code>) or with a relevant function, described in the respective sections below.</p>
<section id="textual" class="level4">
<h4 class="anchored" data-anchor-id="textual">Textual</h4>
<p>The simplest way to deal with textual data in R is by using the <a href="https://stringr.tidyverse.org/">stringr</a> package.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Consult the user guide
</div>
</div>
<div class="callout-body-container callout-body">
<p>You should consult the official <em><a href="https://stringr.tidyverse.org/articles/stringr.html">Introduction to stringr</a></em> user guide for details about the package, and the <a href="https://github.com/rstudio/cheatsheets/blob/main/strings.pdf">official cheatsheet</a> for a detailed summary. We’ve included a brief summary of some useful functions here.</p>
</div>
</div>
<!-- 
For each example below, append `.method` to `df["col_name"]`. For example, the method `.str.replace` should be used as `df["col_name"].str.replace()`. Each function is applied to **every row in "col_name"**
 -->
<p>Load in the package with <code>library(stringr)</code>. All stringr functions follow the same format:</p>
<p><i></i></p><i>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>str_<span class="sc">&lt;</span>function_name<span class="sc">&gt;</span>(input_string, parameters...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</i><p><i></i></p>
<p>The value for <code>input_string</code> can be a variable(s). If you’re using pipes, you could use <code>select()</code> to choose the columns to include. For example</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(a_string_col) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_length</span>()   <span class="co"># Or any other stringr function</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Some useful functions are included here for reference.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>str_detect(...)</code></td>
<td>Return TRUE/FALSE if pattern is in the string.</td>
</tr>
<tr class="even">
<td><code>str_sub(...)</code></td>
<td>Extract a substring based on character indices (a slice).</td>
</tr>
<tr class="odd">
<td><code>str_trim(...)</code></td>
<td>Trim whitespace from start and/or end of the string.</td>
</tr>
<tr class="even">
<td><code>str_replace(...)</code></td>
<td>Replace the first matched pattern in the string (use <code>str_replace_all(...)</code> to replace all).</td>
</tr>
<tr class="odd">
<td><code>str_c(...)</code></td>
<td>Join multiple strings into one.</td>
</tr>
</tbody>
</table>
</section>
<section id="time-series" class="level4">
<h4 class="anchored" data-anchor-id="time-series">Time series</h4>
<p>The simplest way to deal with temporal data in R is by using the <a href="https://lubridate.tidyverse.org/">lubridate</a> package.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Consult the user guide
</div>
</div>
<div class="callout-body-container callout-body">
<p>You should consult the official <em><a href="https://lubridate.tidyverse.org/articles/lubridate.html">Do more with dates and times in R</a></em> user guide for details about the package, and the <a href="https://rawgit.com/rstudio/cheatsheets/main/lubridate.pdf">official cheatsheet</a> for a detailed summary. We’ve included a brief summary of some useful functions here.</p>
</div>
</div>
<p>Load in the package with <code>library(lubridate)</code>. To convert the column <code>dt_col</code> into an appropriate type, use</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>dt_col <span class="ot">&lt;-</span> <span class="fu">as_datetime</span>(df<span class="sc">$</span>dt_col)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>There are other parsing functions, should your needs be more specific. <a href="https://rawgit.com/rstudio/cheatsheets/main/lubridate.pdf">Take a look at the cheatsheet</a> to learn more.</p>
<p>Most lubridate functions will take in a date-time object (or a variable containing them). You can use the pipe, for example</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(a_datetime_col) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">year</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Some useful functions are included here for reference.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>hour()</code></td>
<td>Returns the hour part of the datetime. Similarly for other units (e.g.&nbsp;<code>year()</code>, <code>second()</code>).</td>
</tr>
<tr class="even">
<td><code>hours(...)</code></td>
<td>Represents a number of hours (similarly for other units). Useful for arithmetic, e.g.&nbsp;<code>df$dt_col + hours(2)</code>. <strong><em>Can result in impossible dates</em></strong>, e.g.&nbsp;31st Feb.</td>
</tr>
<tr class="odd">
<td><code>dhours(...)</code></td>
<td>Represents a number of hours in terms of seconds (similarly for other units). Useful for arithmetic, e.g.&nbsp;<code>df$dt_col + dhours(2)</code>. <strong><em>Inconsistent units (e.g.&nbsp;months, leap-years) are approximated</em></strong>.</td>
</tr>
<tr class="even">
<td><code>round_date(...)</code></td>
<td>Rounds to the near unit specified.</td>
</tr>
<tr class="odd">
<td><code>with_tz(...)</code></td>
<td>Convert a date-time to a new time zone</td>
</tr>
</tbody>
</table>
<section id="filtering" class="level5">
<h5 class="anchored" data-anchor-id="filtering">Filtering</h5>
<p>You can filter particular parts of the timestamp as normal, because they’re just numbers:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(dt_col) <span class="sc">==</span> <span class="dv">2026</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>However, you might want to filter from or before a particular date-time. Use the parsing functions to do this:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(dt_col) <span class="sc">&gt;</span> <span class="fu">as_datetime</span>(<span class="st">"2026/02/03"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="categorical" class="level4">
<h4 class="anchored" data-anchor-id="categorical">Categorical</h4>
<p>R has a special, built-in type for categorical data: <code>factor</code>. It stores the different possible values as “levels”, which it maps to your data, making it more efficient than normal strings.</p>
<p>Factors can also order the levels, making it a good choice for ordered data (e.g.&nbsp;“Small” &lt; “Medium” &lt; “Large”).</p>
<p>To make the variable <code>cat_col</code> a factor, use the <code>factor()</code> function:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>cat_col <span class="ot">&lt;-</span> <span class="fu">factor</span>(df<span class="sc">$</span>cat_col)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You can use <code>levels(df$cat_col)</code> to see the unique levels.</p>
<p>For more advanced functions, you can use the <a href="https://forcats.tidyverse.org/">forcats</a> package.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Consult the user guide
</div>
</div>
<div class="callout-body-container callout-body">
<p>You should consult the official <em><a href="https://forcats.tidyverse.org/articles/forcats.html">Introduction to forcats</a></em> user guide for details about the package, and the <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/factors.pdf">official cheatsheet</a> for a detailed summary. We’ve included a brief summary of some useful functions here.</p>
</div>
</div>
<p>Load in the package with <code>library(forcats)</code>.</p>
<p>All forcats functions follow the same format:</p>
<p><i></i></p><i>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>fct_<span class="sc">&lt;</span>function_name<span class="sc">&gt;</span>(input_factor, parameters...)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</i><p><i></i></p>
<p>If you’re using pipes, you could use <code>select()</code> to choose the columns to include. For example</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(a_cat_col) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fct_count</span>()   <span class="co"># Or any other forcats function</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Some useful functions are included here for reference.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>fct_count()</code></td>
<td>Count the number of values per level</td>
</tr>
<tr class="even">
<td><code>fct_c()</code></td>
<td>Combine factors with different levels</td>
</tr>
<tr class="odd">
<td><code>fct_relevel(...)</code></td>
<td>Manually reorder the factor levels</td>
</tr>
<tr class="even">
<td><code>fct_recode(...)</code></td>
<td>Manually change the levels</td>
</tr>
<tr class="odd">
<td><code>fct_collapse(...)</code></td>
<td>Collapse multiple levels into a manual groups</td>
</tr>
<tr class="even">
<td><code>fct_other(...)</code></td>
<td>Collapse selected levels into a single “other” level</td>
</tr>
</tbody>
</table>
</section>
<section id="geospatial" class="level4">
<h4 class="anchored" data-anchor-id="geospatial">Geospatial</h4>
<p>Managing geospatial data is a complex task beyond the scope of this introductory intensive. If you’re planning to analyse geospatial data in R, you should check out</p>
<ul>
<li><a href="https://r-spatial.github.io/sf/articles/sf1.html">sf</a> (simple features) for <strong>vector data</strong></li>
<li><a href="https://rspatial.github.io/terra/index.html">terra</a> for <strong>raster data</strong> and more complex vector data</li>
<li><a href="https://r-spatial.github.io/stars/">stars</a> for spatiotemporal data, irregular grids or other advanced features</li>
</ul>
<p>Let us know if you’d like a hand or want to discuss further!</p>
</section>
</section>
</section>
<section id="what-to-do-when-you-dont-know-what-to-do" class="level2">
<h2 class="anchored" data-anchor-id="what-to-do-when-you-dont-know-what-to-do">What to do when you don’t know what to do</h2>
<ol type="1">
<li><strong>Consult the documentation</strong>. If your function isn’t behaving, go to the specific page for that function. Otherwise, consult a relevant user guide or <a href="https://posit.co/resources/cheatsheets/">cheat sheet</a>.</li>
<li><strong>Search the web for your issue</strong> to find practical and canonical approaches to typical data cleaning tasks. <a href="https://stackoverflow.com/questions/tagged/r">Stackoverflow is your friend</a>.</li>
<li><strong>Ask us while we’re here!</strong> And once we’re gone, shoot us an email at <a href="mailto:training@library.uq.edu.au">training@library.uq.edu.au</a></li>
<li>Lots of people also ask AI. There are pros and cons, but beware: you’ll get a solution that <em>probably</em> works, but if you don’t know why, <strong>you should double check the data matches what you want</strong> (and try learn what it’s done!).</li>
</ol>
</section>
<section id="now-give-it-a-go" class="level2">
<h2 class="anchored" data-anchor-id="now-give-it-a-go">Now give it a go!</h2>
<p>For the rest of this session, we’d love to help you get your data set up and working on your end. For that reason, we’ve dedicated this time to troubleshooting any issues that arise together. Good luck!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/uqlibrary\.github\.io\/technology-training-intensives\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>