<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2026-01-09">

<title>Data Sources and Projections – UQ Library Training Intensives</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d58b9a2750f78c4ba5585652ef45bd1c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">UQ Library Training Intensives</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../r/setup.html"> 
<span class="menu-text">R</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../qgis/setup.html"> 
<span class="menu-text">QGIS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../python/setup.html"> 
<span class="menu-text">Python</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../project/details.html"> 
<span class="menu-text">The Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../gallery/project_gallery.html"> 
<span class="menu-text">Project Gallery</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://uqlibrary.github.io/technology-training"> 
<span class="menu-text">UQ Library Technology Training</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-are-we-going-to-learn" id="toc-what-are-we-going-to-learn" class="nav-link active" data-scroll-target="#what-are-we-going-to-learn">What are we going to learn?</a>
  <ul class="collapse">
  <li><a href="#projections" id="toc-projections" class="nav-link" data-scroll-target="#projections">Projections</a></li>
  <li><a href="#data-sources" id="toc-data-sources" class="nav-link" data-scroll-target="#data-sources">Data Sources</a></li>
  </ul></li>
  <li><a href="#what-are-projections" id="toc-what-are-projections" class="nav-link" data-scroll-target="#what-are-projections">What are Projections?</a></li>
  <li><a href="#projections-1" id="toc-projections-1" class="nav-link" data-scroll-target="#projections-1">Projections</a>
  <ul class="collapse">
  <li><a href="#what-are-projections-1" id="toc-what-are-projections-1" class="nav-link" data-scroll-target="#what-are-projections-1">What are projections?</a></li>
  <li><a href="#why-are-projections-important-to-us" id="toc-why-are-projections-important-to-us" class="nav-link" data-scroll-target="#why-are-projections-important-to-us">Why are projections important to us?</a></li>
  </ul></li>
  <li><a href="#set-the-project-projection" id="toc-set-the-project-projection" class="nav-link" data-scroll-target="#set-the-project-projection">Set the Project Projection</a>
  <ul class="collapse">
  <li><a href="#reproject" id="toc-reproject" class="nav-link" data-scroll-target="#reproject">Reproject</a></li>
  </ul></li>
  <li><a href="#buffer-data" id="toc-buffer-data" class="nav-link" data-scroll-target="#buffer-data">Buffer Data</a></li>
  <li><a href="#select-and-reproject" id="toc-select-and-reproject" class="nav-link" data-scroll-target="#select-and-reproject">Select and Reproject</a></li>
  <li><a href="#polygons-to-lines" id="toc-polygons-to-lines" class="nav-link" data-scroll-target="#polygons-to-lines">Polygons to Lines</a>
  <ul class="collapse">
  <li><a href="#buffer-the-lines" id="toc-buffer-the-lines" class="nav-link" data-scroll-target="#buffer-the-lines">Buffer the Lines</a></li>
  <li><a href="#explore-projections" id="toc-explore-projections" class="nav-link" data-scroll-target="#explore-projections">Explore Projections</a>
  <ul class="collapse">
  <li><a href="#reproject-data" id="toc-reproject-data" class="nav-link" data-scroll-target="#reproject-data">Reproject Data</a></li>
  <li><a href="#buffer-reprojected-lines" id="toc-buffer-reprojected-lines" class="nav-link" data-scroll-target="#buffer-reprojected-lines">Buffer Reprojected Lines</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a>
  <ul class="collapse">
  <li><a href="#council-data" id="toc-council-data" class="nav-link" data-scroll-target="#council-data">Council Data</a></li>
  <li><a href="#federal-data" id="toc-federal-data" class="nav-link" data-scroll-target="#federal-data">Federal Data</a></li>
  <li><a href="#raster-data" id="toc-raster-data" class="nav-link" data-scroll-target="#raster-data">Raster Data</a>
  <ul class="collapse">
  <li><a href="#dem" id="toc-dem" class="nav-link" data-scroll-target="#dem">DEM</a></li>
  <li><a href="#aerial-imagery" id="toc-aerial-imagery" class="nav-link" data-scroll-target="#aerial-imagery">Aerial Imagery</a></li>
  </ul></li>
  <li><a href="#more-data-sources" id="toc-more-data-sources" class="nav-link" data-scroll-target="#more-data-sources">More Data Sources</a>
  <ul class="collapse">
  <li><a href="#aerial-imagery-1" id="toc-aerial-imagery-1" class="nav-link" data-scroll-target="#aerial-imagery-1">Aerial Imagery</a></li>
  </ul></li>
  <li><a href="#basemaps" id="toc-basemaps" class="nav-link" data-scroll-target="#basemaps">Basemaps</a>
  <ul class="collapse">
  <li><a href="#mapserver-raster-files" id="toc-mapserver-raster-files" class="nav-link" data-scroll-target="#mapserver-raster-files">Mapserver Raster Files</a></li>
  <li><a href="#more-web-mapping-services" id="toc-more-web-mapping-services" class="nav-link" data-scroll-target="#more-web-mapping-services">More Web Mapping Services</a></li>
  </ul></li>
  <li><a href="#vector-data" id="toc-vector-data" class="nav-link" data-scroll-target="#vector-data">Vector Data</a></li>
  <li><a href="#lot-plans" id="toc-lot-plans" class="nav-link" data-scroll-target="#lot-plans">Lot Plans</a>
  <ul class="collapse">
  <li><a href="#lot-plans-1" id="toc-lot-plans-1" class="nav-link" data-scroll-target="#lot-plans-1">Lot Plans</a></li>
  <li><a href="#queensland-globe" id="toc-queensland-globe" class="nav-link" data-scroll-target="#queensland-globe">Queensland Globe</a></li>
  <li><a href="#online-community-spatial-repositories" id="toc-online-community-spatial-repositories" class="nav-link" data-scroll-target="#online-community-spatial-repositories">Online Community Spatial Repositories</a></li>
  <li><a href="#qld-government-spatial-data" id="toc-qld-government-spatial-data" class="nav-link" data-scroll-target="#qld-government-spatial-data">QLD Government Spatial Data</a></li>
  <li><a href="#federal-environment-data" id="toc-federal-environment-data" class="nav-link" data-scroll-target="#federal-environment-data">Federal Environment Data</a></li>
  <li><a href="#australian-bureau-of-statistics-data" id="toc-australian-bureau-of-statistics-data" class="nav-link" data-scroll-target="#australian-bureau-of-statistics-data">Australian Bureau of Statistics Data</a></li>
  </ul></li>
  <li><a href="#get-some-elevation-data" id="toc-get-some-elevation-data" class="nav-link" data-scroll-target="#get-some-elevation-data">Get some elevation data</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Sources and Projections</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 9, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="what-are-we-going-to-learn" class="level2">
<h2 class="anchored" data-anchor-id="what-are-we-going-to-learn">What are we going to learn?</h2>
<p>In this workshop, we will learn about:</p>
<section id="projections" class="level3">
<h3 class="anchored" data-anchor-id="projections">Projections</h3>
<ul>
<li>Why we have them and what goes wrong without them</li>
<li>GCS vs PCS</li>
<li>Local Projections</li>
<li>Area Calculation differences</li>
</ul>
</section>
<section id="data-sources" class="level3">
<h3 class="anchored" data-anchor-id="data-sources">Data Sources</h3>
<ul>
<li>Local, State, Federal Gov Data</li>
<li>International</li>
<li>NGO</li>
<li>Corporate (ESRI, etc)</li>
<li>WMS etc</li>
</ul>
</section>
</section>
<section id="what-are-projections" class="level2">
<h2 class="anchored" data-anchor-id="what-are-projections">What are Projections?</h2>
<p>This content is currently in Vector and in Field Work.</p>
</section>
<section id="projections-1" class="level2">
<h2 class="anchored" data-anchor-id="projections-1">Projections</h2>
<section id="what-are-projections-1" class="level3">
<h3 class="anchored" data-anchor-id="what-are-projections-1">What are projections?</h3>
<p>To turn the geoid/spheroid shape of the Earth into a flat map, we need to squish, stretch, and distort the map to make it flat. The mathematical equations used to do this are what we’re talking about when we say “<strong>projections</strong>”. Imagine it like a soccer ball, if we have to squash it to make it flat, it’s not going to look nice and square like our maps do. So we pull and stretch it to make it flat and rectangular. There will always be some kind of distortion when we stretch our map like this. This is why the Mercator Projection makes Greenland look large, and Africa look smaller than it really is.</p>
</section>
<section id="why-are-projections-important-to-us" class="level3">
<h3 class="anchored" data-anchor-id="why-are-projections-important-to-us">Why are projections important to us?</h3>
<p>Well, when we make these distortions, we have to compromise somewhere, and that means our lengths, or size or direction will be different to what it really is. To avoid this kind of distortion, often local projections are used. There are fewer compromises needed when focused on a small area. By using a local projection, we don’t need to worry about keeping Greenland looking the right shape if we’re focused on Brisbane. Going back to Soccer balls, if we cut out a single panel from the ball, it will be much easier to make that flat.</p>
<p>The trouble with using data of different projections is that they might be slightly off around the edges, giving us different total areas in a polygon, or showing a point outside a boundary, when it’s really inside. To avoid this, it’s often best to convert all of your data to using the same projection.</p>
<p>Today we’re going to use a suitable local projection: EPSG:7856 - GDA2020 / MGA zone 56</p>
</section>
</section>
<section id="set-the-project-projection" class="level2">
<h2 class="anchored" data-anchor-id="set-the-project-projection">Set the Project Projection</h2>
<p>We need to choose the projection for our current session of QGIS. Today we will be focusing on South East Queensland (SEQ), so we will choose GDA2020 / MGA zone 56. We will go into projections in more detail soon.</p>
<ul>
<li>Go to <code>Project &gt; Properties</code> select the <strong>CRS</strong> tab.</li>
<li>In the filter section, type “GDA2020 56”</li>
<li>From the <strong>Coordinate Reference System</strong> list, select <code>EPSG:7856 - GDA2020 / MGA zone 56</code></li>
</ul>
<blockquote class="blockquote">
<p>You will notice that the OpenStreetMap basemap looks very warped, except for the East Coast of Australia. This is because the projection we have selected is very focused on reducing distortion within the bounds of the projection’s area (Eastern Australia).</p>
</blockquote>
<section id="reproject" class="level3">
<h3 class="anchored" data-anchor-id="reproject">Reproject</h3>
<p>For each of our layers, do the following:</p>
<ul>
<li><p>Go to <code>Vector &gt; Data Management Tools &gt; Reproject Layer...</code></p></li>
<li><p>Choose the layer in <code>Input layer</code></p></li>
<li><p>Set the Target CRS to <code>EPSG:7856 - GDA2020 / MGA zone 56</code></p>
<ul>
<li>If that option isn’t available, click <img src="projection.png" class="img-fluid"> (Select CRS), and type “GDA2020 56” into the filter, the option should now appear under the <strong>Predefined Coordinate Reference Systems</strong> section.</li>
</ul></li>
<li><p>Click the three dots <code>...</code> next to the <code>Reprojected</code> section, and click <strong>Save to File…</strong></p></li>
<li><p>Navigate to your <code>data &gt; processed</code> folder and save the file there. For example, save <strong>SA2_ERP_2021</strong> as <strong>SA2_Reproj</strong>, <strong>CAPAD2020_terrestrial_QLD</strong> as <strong>CAPAD_Reproj</strong>, <strong>koala_reduced</strong> as <strong>Koalas_Reproj</strong> and <strong>koala_priority_area</strong> as <strong>KPA_Reproj</strong></p></li>
<li><p>Click <code>Run</code></p></li>
</ul>
<p>You won’t notice any difference, as QGIS is helpfully doing “on the fly projections” to make the layers sit nicely together. But now that you’ve reprojected your data, you can safely do your analyses.</p>
</section>
</section>
<section id="buffer-data" class="level1">
<h1>Buffer Data</h1>
<p>Buffers are a simple, but powerful, tool that we can use to extend the borders of our vector data. It’s useful for polygons, lines, and points.</p>
<p>Perhaps we need to keep 10m from the property boundaries when doing our fieldwork. A buffer can help us there.</p>
<p>However, our <strong>St_Lucia_Property_Boundaries</strong> layer has some issues we need to resolve before we can buffer it.</p>
<ul>
<li><p>It has extra properties that we don’t need</p></li>
<li><p>A buffer on a polygon will grow out from the edges, not put a buffer either side of the edges</p></li>
<li><p>It’s in a Geographic Coordinate System</p></li>
</ul>
<p>Let’s look at what happens if we create a buffer in a Geographic Coordinate System:</p>
<ul>
<li><p>Go to <code>Vector &gt; Geoprocessing Tools &gt; Buffer</code></p></li>
<li><p>Choose “<strong>St_Lucia_Property_Boundaries</strong>” as the Input Layer</p></li>
<li><p>We next want to choose distance that we want to create a buffer away from our vector.</p>
<ul>
<li>However, you’ll note that because the layer projection is EPSG:4283 GDA94 (a geographic coordinate system), the distance is currently in <strong>degrees</strong>.</li>
</ul></li>
<li><p>If you click Run with 10 Degrees, your buffer will be nearly the size of Queensland.</p>
<ul>
<li>To change this to metres, we first need to convert our layer to a local projected coordinate system.</li>
</ul></li>
</ul>
</section>
<section id="select-and-reproject" class="level1">
<h1>Select and Reproject</h1>
<p>We can <strong>Select</strong> the data we want, and <strong>reproject</strong> at the same time!</p>
<p>We first need to select the lots that are relevant to us:</p>
<ul>
<li><p>Click the dropdown next to the <strong>Select Feature(s)</strong> icon in the toolbar, and choose the <code>Select Feature by polygon</code> option</p>
<ul>
<li>This allows us to click around our desired selection</li>
</ul></li>
<li><p>Make sure <strong>St_Lucia_Property_Boundaries</strong> is the selected layer in the <code>Layers</code> panel</p></li>
<li><p>Click around the lots to draw a shape around the lots we want to keep</p></li>
<li><p>Right-click to finish selecting</p>
<ul>
<li>If you need to select any more features, press and hold <strong>Shift</strong> while drawing around your extra features, when you right-click they will be added to your selection</li>
<li>To remove any accidentally selected features from the selection, press and hold <strong>Control</strong> and draw around the unwanted features.</li>
</ul></li>
<li><p>Right click on the <strong>St_Lucia_Property_Boundaries</strong> layer, and select <code>Export &gt; Save Selected Features As...</code></p></li>
<li><p>Choose <strong>Geopackage</strong> as the <code>Format</code></p></li>
<li><p>Click the three dots on the right of <code>File name</code>, navigate to your <strong>Processed</strong> data folder and save it as “<strong>UQ_Boundary</strong>”</p></li>
<li><p>See the <code>Layer name</code> to “<strong>UQ Boundary</strong>”</p>
<ul>
<li>The Layer name can have spaces in it, but it’s best to avoid spaces in a File name</li>
</ul></li>
<li><p>Make sure you change the CRS, effectively reprojecting the layer</p>
<ul>
<li>Choose <code>EPSG:23856 - GDA94 / MGA zone 56</code>
<ul>
<li>This is the same projection as our DEM, and a good local projection</li>
</ul></li>
</ul></li>
<li><p>Click <code>OK</code></p></li>
</ul>
</section>
<section id="polygons-to-lines" class="level1">
<h1>Polygons to Lines</h1>
<p>To buffer either side of the edges of our boundaries, we need to convert them from Polygons to Lines.</p>
<ul>
<li>Go to <code>Vector &gt; Geometry Tools &gt; Polygons to Lines</code></li>
<li>Set the <code>Input Layer</code> to <strong>UQ Boundary</strong></li>
<li>Click <code>OK</code></li>
</ul>
<section id="buffer-the-lines" class="level2">
<h2 class="anchored" data-anchor-id="buffer-the-lines">Buffer the Lines</h2>
<ul>
<li><p>Go to <code>Vector &gt; Geoprocessing Tools &gt; Buffer</code></p></li>
<li><p>Choose “<strong>Lines</strong>” as the <code>Input Layer</code></p></li>
<li><p>Set the <code>Distance</code> to <strong>10</strong> metres</p>
<ul>
<li>We can also make the buffer squared if we want, but we will keep it with the rounded default</li>
</ul></li>
<li><p>Tick the <code>Dissolve result</code> box</p>
<ul>
<li>This will merge the polygons from our output, making for a cleaner look. The Dissolve tool also exists as a standalone tool.</li>
</ul></li>
<li><p>Click the three dots <code>...</code> next to the <strong>Buffered</strong> field, navigate to the project’s <strong>processed</strong> data folder, and type in <strong>UQ_Boundary_Buffer</strong> and click <code>Save</code></p></li>
<li><p>Click <code>Run</code></p></li>
</ul>
</section>
<section id="explore-projections" class="level2">
<h2 class="anchored" data-anchor-id="explore-projections">Explore Projections</h2>
<p>Hopefully it’s clear why we needed to convert from a Geographic Coordinate System to a Projected Coordinate System, but why is it important that we chose the local projection <strong>EPSG:23856 - GDA94 / MGA zone 56</strong>?</p>
<p>Let’s see what would happen if we did our buffer on those lines in a different projection.</p>
<section id="reproject-data" class="level3">
<h3 class="anchored" data-anchor-id="reproject-data">Reproject Data</h3>
<ul>
<li><p>Go to <code>Vector &gt; Data Management Tools &gt; Reproject Layer...</code></p></li>
<li><p>Choose the <strong>Lines</strong> in <code>Input layer</code></p></li>
<li><p>Set the Target CRS to <code>EPSG:3857 - WGS84 / Pseudo-Mercator</code></p>
<ul>
<li>This is a very common projection that Google and your phones use</li>
</ul></li>
<li><p>Click <code>Run</code></p>
<ul>
<li>We don’t need to permanently save this, so we can leave it as a temporary layer</li>
</ul></li>
</ul>
</section>
<section id="buffer-reprojected-lines" class="level3">
<h3 class="anchored" data-anchor-id="buffer-reprojected-lines">Buffer Reprojected Lines</h3>
<ul>
<li><p>Go to <code>Vector &gt; Geoprocessing Tools &gt; Buffer</code></p></li>
<li><p>Choose “<strong>Reprojected</strong>” as the <code>Input Layer</code></p></li>
<li><p>Set the <code>Distance</code> to <strong>10</strong> metres</p></li>
<li><p>Click <code>Run</code></p></li>
</ul>
<p>Move the new <strong>Buffered</strong> layer order so that it draws over the <strong>UQ_Boundar_Buffer</strong> layer. Notice anything interesting?</p>
<p>The new <strong>Buffered</strong> layer is about 1m smaller!</p>
<p>This is because <strong>EPSG:3857 - WGS84 / Pseudo-Mercator</strong> is a global projection that tries to preserve shapes. Although the units are in metres, the scaling factor changes as you move away from the equator to account for the curvature of the Earth.</p>
<p>It can still be useful to use this projection to take points. But you have to be careful when you’re making measurements and calculations, for those, a local projection is usually better.</p>
</section>
</section>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<p>This is a list of Spatial data sources that you might find useful. Some are used in our workshops, others didn’t fit, but are still very valuable. Some of the data sources will have instructions for extracting the data, some will not. This is primarily a repository to refer to and use to find data.</p>
<section id="council-data" class="level2">
<h2 class="anchored" data-anchor-id="council-data">Council Data</h2>
<p><a href="https://scrc.maps.arcgis.com/apps/webappviewer/index.html?id=48501cb9e7294555be5b08e35e949616">Sunshine Coast MyMaps</a></p>
</section>
<section id="federal-data" class="level2">
<h2 class="anchored" data-anchor-id="federal-data">Federal Data</h2>
<p>CSIRO’s <a href="https://data.csiro.au/collection/csiro:43016">Norfolk Island Data Portal</a> <a href="https://data.csiro.au/collections/search/SQDEM/STsearch-by-keyword/">CSIRO spatial products</a>.</p>
</section>
<section id="raster-data" class="level2">
<h2 class="anchored" data-anchor-id="raster-data">Raster Data</h2>
<section id="dem" class="level3">
<h3 class="anchored" data-anchor-id="dem">DEM</h3>
<p>A Digital Elevation Model (DEM) is a common example of <strong>raster data</strong>, i.e.&nbsp;grid data that contains a value in each cell (a bit like the pixels in a coloured picture).</p>
<p>For this tutorial, we are using a DEM sourced from <strong>ELVIS</strong> - Geoscience Australia’s ELeVation Information System.</p>
<ul>
<li>Go to <a href="http://www.ga.gov.au/elvis/" class="uri">http://www.ga.gov.au/elvis/</a></li>
<li>Search for “St Lucia” in the <code>Location Search</code> search box and select the first result</li>
<li>Click <code>Order Data</code></li>
<li>Choose “Draw” and “Box” and then click the <code>Draw</code> button</li>
<li>Click on the map to start drawing a rectangle around your desired area</li>
<li>Then click <code>Search</code></li>
<li>The right panel will show you all the different datasets available in that area</li>
<li>We want the QLD Government Digital Elevation Model 1 Metre, click the down arrow on the right</li>
<li>As you hover over the different options, they will highlight a red box on the map, click the tick box and select all that overlap the area you’re interested in (note that there may be data from different years here)</li>
<li>When you have the data you want, scroll to the bottom of the Order Data window</li>
<li>Select your industry, enter your email, tick the reCAPTCHA, and click the <code>Order Datasets</code> button</li>
<li>You should receive an email within 5 minutes, download the files from the link in the email, extract the folder to your project folder, and add them to your map.</li>
</ul>
</section>
<section id="aerial-imagery" class="level3">
<h3 class="anchored" data-anchor-id="aerial-imagery">Aerial Imagery</h3>
<p>There are a few places you can aquire aerial photography, today we will look at two sources, one is freely available Government Data, the other is accessible from using your UQ credentials.</p>
<p>As a UQ student, you also have access to very high resoltuion imagery from <strong>NearMap</strong>. You can even access an array of imagery going back in time.</p>
<ul>
<li>Go to the <a href="https://admin.nearmap.com/invitation/domain-signup?token=q9WIbXMtna1iskb2meNGhKpCaQp3WTRbMhXpQVGWkKouKUeqzkpjNznC_Ogz5iKYiw0Ev7vym2Ykaj_W_V4dBbTzR6qUX2eTDsNHpBuR4XbU9vDRxQN_Rg==">UQ NearMap Portal</a></li>
<li>Enter your UQ Student (<span class="citation" data-cites="student.uq.edu.au">@student.uq.edu.au</span>) or Staff (<span class="citation" data-cites="uq.edu.au">@uq.edu.au</span>) email address, with the appropriate domain selected. Click “Invite me”.</li>
<li>You should receive an email soon after, click the “Accept Invitation” button, and go through the account setup process.</li>
<li>Go to Login and enter your email address, click “Next” and enter your password.</li>
<li>From the top right select <code>MapBrowser</code>.</li>
<li>Type “St Lucia, QLD” in the search box, press enter</li>
<li>You can click the date down the bottom to look at different snapshots in time, and even compare maps side-by-side.</li>
<li>To save imagery from NearMap, simply click the “Exports” button on the left handside (it is an image icon)</li>
<li>From the menu that appears change the “Export type” to “Georeferenced image”</li>
<li>From “Projection” choose GDA2020 / MGA zone 56</li>
<li>You can increase and decrease the size of the bounding box by adjusting its corners, a smaller box means you can have a finer resolution, down to 0.075m. If we select all of UQ St Lucia in one go, the highest resolution we can have is 0.299m.</li>
<li>Once you’re happy with your selection click <code>Download Files</code></li>
<li>Move the downloaded zip file to your project folder, and open them in QGIS</li>
</ul>
</section>
</section>
<section id="more-data-sources" class="level2">
<h2 class="anchored" data-anchor-id="more-data-sources">More Data Sources</h2>
<section id="aerial-imagery-1" class="level3">
<h3 class="anchored" data-anchor-id="aerial-imagery-1">Aerial Imagery</h3>
<p>There are a few places you can aquire aerial photography, today we will look at two sources, one is freely available Government Data from <strong>QImagery</strong>, the other is accessible from using your UQ credentials.</p>
<ul>
<li>Go to <a href="https://qimagery.information.qld.gov.au/">QImagery</a></li>
<li>Read and tick the “I acknowledge I have read and agree to the Terms &amp; Conditions” box, and click <code>Get Started</code></li>
<li>Click the Search button, select ‘locality, town or city’ and search for “St Lucia” in the “Enter search term” search box and select the first result</li>
<li>It will zoom to your selected location then click the newly appeared <code>Search</code> button</li>
<li>From here you can select from a wide array of images of QLD over many years.</li>
<li>Click one of the drop-downs and hover over the options to see where those images are located. Preview the image by clicking View.</li>
<li>You can then download your desired images by clicking “Download” and selecting TIFF (georeferenced)</li>
<li>Move the TIFF file(s) to your project folder, and open them in QGIS</li>
</ul>
<p>You can also get historical images from Geoscience Australia’s <a href="https://experience.arcgis.com/experience/9a0ecbafe94f49829712b46fc69186ff">Historical Aerial Photo (HAP) Collection</a></p>
</section>
</section>
<section id="basemaps" class="level2">
<h2 class="anchored" data-anchor-id="basemaps">Basemaps</h2>
<p>Let’s start by making a map we might use in an <strong>Academic Paper</strong> or in an <strong>Article for the Public</strong>, where we want to focus their attention on our data. Unless we really need <strong>Satellite</strong> imagery, or everything on the <strong>OpenStreetMap</strong>, it is too busy and distracting.<br>
<br>
Let’s load in a new basemap.<br>
<br>
There are many ways of doing this, in the past we’ve used the <strong>QuickMapServices</strong> plugin to load in new basemaps, now we can go to the next step and source them externally. We can do this with WMTS (Web Map Tile Service), WCS (Web Coverage Service), ArcGIS REST Servers, and XYZ Tiles.</p>
<p>Today we’re going to use an XYZ Tile from CARTODB.</p>
<ul>
<li>Scroll down the <code>Browser</code> panel until your see <strong>XYZ Tiles</strong></li>
<li>Right click XYZ Tiles and select <code>New Connection...</code>
<ul>
<li>In <code>Name</code> type <strong>Voyager (no labels)</strong></li>
<li>In <code>URL</code> paste:<br>
https://a.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}<span class="citation" data-cites="2x.png">@2x.png</span></li>
<li>Increase the Max. Zoom Level to 20
<ul>
<li>This value depends on what is available from the given service in different parts of the world. Increasing that value beyond 20 for this map in Brisbane will show “Map data not yet available” when you zoom in very close.</li>
</ul></li>
<li>Click <code>OK</code></li>
</ul></li>
<li>In the <code>Browser</code> panel, expand <code>XYZ Tiles</code> and double click on <code>Voyager (no labels)</code></li>
<li>Now do the same for this <strong>Light Gray Basemap</strong> from ESRI, but set the Max. Zoom Level to 16:<br>
https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}</li>
</ul>
<p>Arrange the layers so that the <strong>Voyager (no labels)</strong> layer is under your other layers (you can hide the <strong>Light Gray Basemap</strong> and <strong>OpenStreetMap</strong> for now).</p>
<p>Isn’t that much less visually busy?!</p>
<section id="mapserver-raster-files" class="level3">
<h3 class="anchored" data-anchor-id="mapserver-raster-files">Mapserver Raster Files</h3>
<p>Today we’re going to use a World Imagery XYZ Tile from ESRI.</p>
<ul>
<li>Scroll down the <code>Browser</code> panel until your see <strong>XYZ Tiles</strong></li>
<li>Right click XYZ Tiles and select <code>New Connection...</code>
<ul>
<li>In <code>Name</code> type <strong>ESRI World Imagery</strong></li>
<li>In <code>URL</code> paste:<br>
https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}</li>
<li>Increase the Max. Zoom Level to 20
<ul>
<li>This value depends on what is available from the given service in different parts of the world. Increasing that value beyond 20 for this map in Brisbane will show “Map data not yet available” when you zoom in very close.</li>
</ul></li>
<li>Click <code>OK</code></li>
</ul></li>
<li>In the <code>Browser</code> panel, expand <code>XYZ Tiles</code> and double click on <code>ESRI World Imagery</code></li>
</ul>
</section>
<section id="more-web-mapping-services" class="level3">
<h3 class="anchored" data-anchor-id="more-web-mapping-services">More Web Mapping Services</h3>
<p>Add any of these URLs via <strong>ArcGIS REST Servers</strong> in QGIS</p>
<p><a href="https://www.data.qld.gov.au/dataset/queensland-imagery-latest-state-program-public-basemap-service">QLD Gov Aerial Basemap</a></p>
<p><a href="https://spatial-gis.information.qld.gov.au/arcgis/rest/services/Transportation/RoadsAndTracks/MapServer">QLD Gov Roads</a></p>
<p><a href="https://spatial-gis.information.qld.gov.au/arcgis/rest/services/Boundaries/AdminBoundariesFramework/MapServer">QLD Heritage Areas</a></p>
<p><a href="https://spatial-gis.information.qld.gov.au/arcgis/rest/services">More QLD Gov Services</a></p>
<p><a href="https://services3.arcgis.com/ocUCNI2h4moKOpKX/ArcGIS/rest/services">Brisbane/SEQ Utilities</a></p>
<p><a href="https://services2.arcgis.com/dEKgZETqwmDAh1rP/ArcGIS/rest/services">BCC Data</a></p>
<p><a href="https://services9.arcgis.com/Ov1diE0uxjL6wSzH/ArcGIS/rest/services/">Random User’s Data</a></p>
<p><a href="https://www.arcgis.com/home/search.html?restrict=false&amp;sortField=relevance&amp;sortOrder=desc&amp;focus=layers-weblayers-features#content">10000+ Searchable Feature Layers from ArcGIS</a></p>
<p><a href="https://help.nearmap.com/kb/articles/752">NearMap API</a></p>
</section>
</section>
<section id="vector-data" class="level2">
<h2 class="anchored" data-anchor-id="vector-data">Vector Data</h2>
</section>
<section id="lot-plans" class="level2">
<h2 class="anchored" data-anchor-id="lot-plans">Lot Plans</h2>
<p>You can access a wide variety of QLD Government Data, including Spatial Data such as lot plans and vegetation maps, from <a href="https://qldspatial.information.qld.gov.au/">QLD Spatial</a>.</p>
<p>Today we have extracted a selection from <a href="https://qldspatial.information.qld.gov.au/catalogue/custom/detail.page?fid=%7B3F217A59-1FDB-412A-813D-A1E7843FB618%7D">Property boundaries Queensland</a></p>
<p>There are three ways to access data from QSpatial.</p>
<ul>
<li><p>Download all of the data from a layer</p></li>
<li><p>Select a portion of a layer for download using the <a href="https://qldspatial.information.qld.gov.au/catalogue/custom/myList.page">My List</a> function</p></li>
<li><p>Live load it into your project using a <a href="https://spatial-gis.information.qld.gov.au/arcgis/rest/services/PlanningCadastre/LandParcelPropertyFramework/MapServer">Mapserver</a>.</p></li>
</ul>
<section id="lot-plans-1" class="level3">
<h3 class="anchored" data-anchor-id="lot-plans-1">Lot Plans</h3>
<p>You can access a wide variety of QLD Government Data, including Spatial Data such as lot plans and vegetation maps, from QLD Spatial. There are three ways to access this data. You can download all of it, you can select a portion for download, or you can live load it into your project. Today we download the files covering our project area.</p>
<ul>
<li><p>To access data from QLD Spatial go to <a href="https://qldspatial.information.qld.gov.au/" class="uri">https://qldspatial.information.qld.gov.au/</a></p></li>
<li><p>Search for “property boundaries”</p></li>
<li><p>Scroll down to “Property boundaries Queensland” and click <strong>Add to my list</strong></p></li>
<li><p>Click <strong>My List</strong> from the top menu</p></li>
<li><p>Click <strong>View/extract in map</strong></p></li>
<li><p>Under Extractable Data, click the box next to <strong>Property boundaries Queensland</strong>, it will become green</p></li>
<li><p>Click <strong>Extract/download</strong></p></li>
<li><p>Click <strong>Choose an area</strong></p></li>
<li><p>Select <strong>BRISBANE CITY</strong> from the Select LGA option</p></li>
<li><p>Choose GeoPackage 1.0 from Select output format</p></li>
<li><p>Enter your Email Address</p></li>
<li><p>Accept the Terms and Conditions</p></li>
<li><p>Click <strong>Extract/Download</strong></p></li>
<li><p>You can can also just download the preprepared data <a href="https://github.com/uqlibrary/technology-training/blob/8e0aebe078198cd8bb65630c9ac4c4c8558a4392/QGIS/mobile/QGIS_Mobile_Data.zip">here</a>, just press the three dots and download.</p></li>
<li><p>Move the downloaded zip file to your project raw data folder, and open the shapefile in QGIS</p></li>
</ul>
</section>
<section id="queensland-globe" class="level3">
<h3 class="anchored" data-anchor-id="queensland-globe">Queensland Globe</h3>
<p>Another way to access QSpatial Data is using the Queensland Globe portal.</p>
<ul>
<li>To access data from Queensland Globe go to <a href="https://qldglobe.information.qld.gov.au">https://qldglobe.information.qld.gov.au</a></li>
<li>Accept the T&amp;Cs.</li>
<li>Click <strong>Search</strong>, Select <strong>Locality (Suburb) within a Local Government Area</strong>, and search for the location you want and select it from the list.</li>
<li>Click <strong>Layers</strong>, click <strong>Add Layers +</strong> here you can scroll through and filter different layer types</li>
<li>We want to tick the box next to <code>Planning Cadastre &gt; Land Parcels &gt; Land Parcel</code> (you may need to zoom in to see certain layers)</li>
<li>To export data click the Wrench Icon in the top right, and then click the Identify icon (i)</li>
<li>Use the triangular Identify Polygon tool to select and area of interest. Double click when you’ve finished selecting your area.</li>
<li>The Layers menu will now show your selection. You can download all, or sections, of your selection.</li>
<li>I will choose <strong>Land Parcel</strong> and then <strong>Download</strong> as a <strong>shp</strong> file.</li>
<li>Note: You may need to disable other layers for this to work correctly. I needed to turn off the <strong>Transportation</strong> layer to prevent roads from being included in my selection.</li>
</ul>
</section>
<section id="online-community-spatial-repositories" class="level3">
<h3 class="anchored" data-anchor-id="online-community-spatial-repositories">Online Community Spatial Repositories</h3>
<section id="koala-sighting-data-encounters" class="level4">
<h4 class="anchored" data-anchor-id="koala-sighting-data-encounters">Koala Sighting Data (encounters)</h4>
<p>If we’re looking at Koalas, we should get some occurence/sighting data.</p>
<p>We’re getting our species observation data today from the <a href="https://www.ala.org.au/">Atlas of Living Australia</a>. This is an Australia Biodiversity occurrence database. It pulls data from a variety of different sources, including government data, individual collectors and community groups. This means that this data will contain sampling bias and will often simply represent encounters, rather than using robust sampling and collection methods. So, while we need to use this data with caution, it’s still a useful dataset!</p>
<p>You need to create an account and request the exact dataset you need, so to speed things up today, we’ve provided the data already cleaned and processed the data in the download link above.</p>
<p>Some similar online repositories include the Global Biodiversity Information Facility (GBIF) and iNaturalist</p>
</section>
<section id="cleaning-and-processing-the-ala-data" class="level4">
<h4 class="anchored" data-anchor-id="cleaning-and-processing-the-ala-data">Cleaning and processing the ALA data</h4>
<p>What do we mean by processed? Well, the ALA dataset has 206 columns by default. This means that each occurrence has 206 associated cells, and when multiplied by ~200,000 sightings, our data gets huge (&gt;300mb!). To save time (and storage space!) today we have already deleted 200 of those columns (bringing the dataset down to 15mb).</p>
</section>
</section>
<section id="qld-government-spatial-data" class="level3">
<h3 class="anchored" data-anchor-id="qld-government-spatial-data">QLD Government Spatial Data</h3>
<p>We’ve seen the <a href="https://qldspatial.information.qld.gov.au/catalogue/custom/index.page">QSpatial data portal</a> in previous sessions, and today we will be getting two lots of data from here.</p>
<section id="koala-priority-areas" class="level4">
<h4 class="anchored" data-anchor-id="koala-priority-areas">Koala Priority Areas</h4>
<p>Koala Priority Areas are areas in SEQ which have been identified as key areas for conservation as part of the South East Queensland Koala Conservation Strategy 2019-2024. You can search for “Koala Priority Areas” in QSpatial, or by going <a href="https://qldspatial.information.qld.gov.au/catalogue/custom/detail.page?fid=%7BE4CCDBA7-11AB-45DD-A064-BDBC02899204%7D">directly to the data</a>.</p>
<p>Let’s get a resource to compare with these QLD government priority areas…</p>
</section>
</section>
<section id="federal-environment-data" class="level3">
<h3 class="anchored" data-anchor-id="federal-environment-data">Federal Environment Data</h3>
<section id="protected-areas" class="level4">
<h4 class="anchored" data-anchor-id="protected-areas">Protected Areas</h4>
<p>The Federal Environment Department has a variety of <a href="http://www.environment.gov.au/fed/catalog/main/home.page">different spatial datasets that you can browse through</a>. Today we are going to be using the Collaborative Australian Protected Areas Database (CAPAD) 2020, which is a compilation of government, Indigenous and privately protected areas for Australia. You can search for “CAPAD” in on the Environment Department website, or by going <a href="http://www.environment.gov.au/fed/catalog/search/resource/details.page?uuid=%7B4448CACD-9DA8-43D1-A48F-48149FD5FCFD%7D">directly to the data</a>.</p>
<p>Finally let’s get some data to put all of our protected areas and observations into context…</p>
</section>
</section>
<section id="australian-bureau-of-statistics-data" class="level3">
<h3 class="anchored" data-anchor-id="australian-bureau-of-statistics-data">Australian Bureau of Statistics Data</h3>
<p>The ABS is a huge source of data, however, it can be a bit difficult to find that data, and use it in a spatial context.</p>
<section id="digital-boundary-files---sa2---suburb-data" class="level4">
<h4 class="anchored" data-anchor-id="digital-boundary-files---sa2---suburb-data">Digital Boundary Files - SA2 - Suburb data</h4>
<p>The ABS has a variety of ways that it splits its data up. These <a href="https://www.abs.gov.au/statistics/standards/australian-statistical-geography-standard-asgs-edition-3/jul2021-jun2026/access-and-downloads/digital-boundary-files">Digital Boundary Files</a> are very useful for classifying data. They generally classify all of Australia into discrete Statistical Areas. Level 1 are the smallest, and Level 4 are the coarsest. (notably, the link above also has non-ABS Structures/boundary files such as Electoral areas and Postcodes). Today we are going to use the Statistical Area 2 data, which effectively represent suburbs, but we can take it a little further with more ABS data.</p>
<section id="population-data" class="level5">
<h5 class="anchored" data-anchor-id="population-data">Population Data</h5>
<p>The ABS have a lot of useful data, today we will be using their population data. They provide it in excel format, as GeoPackages (by SA2 and LGAs), and as population grid raster files. Today we will be using their SA2 <a href="https://www.abs.gov.au/statistics/people/population/regional-population/latest-release#data-download">GeoPackages</a>. This means we have our digital boundaries, and population in one!</p>
</section>
</section>
</section>
</section>
<section id="get-some-elevation-data" class="level2">
<h2 class="anchored" data-anchor-id="get-some-elevation-data">Get some elevation data</h2>
<p>For this tutorial, we are using a DEM sourced from the USGS website.</p>
<ul>
<li>Go to https://earthexplorer.usgs.gov/</li>
<li>Click the World Features box, and then search for “Brisbane” in the “Feature Name” search box</li>
<li>Click Show and select the first result</li>
<li>Zoom onto an area of interest around Brisbane and click “Use Map”</li>
<li>Click the “Data Sets” button and then <code>Digital Elevation &gt; SRTM</code>, select “SRTM 1 Arc-Second Global” and click “Results”</li>
</ul>
<p>“SRTM” stands for “<a href="https://www.usgs.gov/centers/eros/science/usgs-eros-archive-digital-elevation-shuttle-radar-topography-mission-srtm-1-arc?qt-science_center_objects=0#qt-science_center_objects">Shuttle Radar Topography Mission</a>”. It provides global elevation data collected in 2000 by the space shuttle Endeavour.</p>
<p>Our area covers two separate raster files. We can click on the foot icon to see the footprint of each file, and the picture icon to see what the DEM looks like.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/uqlibrary\.github\.io\/technology-training-intensives\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>